"use strict";angular.module("sbAdminApp",[]).controller("ledCtrl",["$scope","$rootScope","baseService",function(e,a,s){e.displayed=[],e.sp={},e.tableState={},e.ids=[],e.callServer=function(a){s.initTable(e,a,s.api.led+"getLedPageList")},e.save=function(a){var l={};a?(l.id=a.id,l.sn=a.sn,l.name=a.name,l.model=a.model,l.width=a.width,l.height=a.height,l.addr=a.addr,l.screenColor=1==a.screenColor?"1":"0"):l={sn:"",name:"",model:"BX-5M1",width:"",height:"",addr:"",screenColor:"0",p:"",city_no:"",cityName:"",district:"",adcode:""},s.confirmDialog(540,a?"编辑终端":"添加终端",l,"tpl/led_saveDevice.html",function(t,i){i.isShowMessage=!1,i.modalForm.$valid?(i.isPosting=!0,s.postData(s.api.led+"saveLed",l,function(){t.close(),s.alert(a?"修改成功":"添加成功","success"),e.callServer(e.tableState)})):i.isShowMessage=!0},function(e){})},e.playManage=function(e){s.getJson(s.api.led+"getPlayLedPage",{sn:e.sn},function(e){if(e[0]){var a=e[0];switch(e[0].font){case 0:a.font="宋体";break;case 1:a.font="黑体";break;case 2:a.font="隶书";break;case 3:a.font="楷体"}switch(e[0].fontColor){case 1:a.fontColor="红色";break;case 2:a.fontColor="黄色";break;case 3:a.fontColor="绿色"}switch(e[0].displayStyle){case 0:a.displayStyle="随机显示";break;case 1:a.displayStyle="静止显示";break;case 2:a.displayStyle="快速打出";break;case 3:a.displayStyle="向左移动";break;case 4:a.displayStyle="向左连移";break;case 5:a.displayStyle="向上移动";break;case 6:a.displayStyle="向上连移";break;case 7:a.displayStyle="闪烁";break;case 8:a.displayStyle="飘雪";break;case 9:a.displayStyle="冒泡";break;case 10:a.displayStyle="中间移出";break;case 11:a.displayStyle="左右移入";break;case 12:a.displayStyle="左右交叉移入";break;case 13:a.displayStyle="上下交叉移入";break;case 14:a.displayStyle="画卷闭合";break;case 15:a.displayStyle="画卷打开";break;case 16:a.displayStyle="向左拉伸";break;case 17:a.displayStyle="向右拉伸";break;case 18:a.displayStyle="向上拉伸";break;case 19:a.displayStyle="向下拉伸";break;case 20:a.displayStyle="向左镭射";break;case 21:a.displayStyle="向右镭射";break;case 22:a.displayStyle="向上镭射";break;case 23:a.displayStyle="向下镭射";break;case 24:a.displayStyle="左右交叉拉幕";break;case 25:a.displayStyle="上下交叉拉幕";break;case 26:a.displayStyle="分散左拉";break;case 27:a.displayStyle="水平百页";break;case 28:a.displayStyle="垂直百页";break;case 29:a.displayStyle="向左拉幕";break;case 30:a.displayStyle="向右拉幕";break;case 31:a.displayStyle="向上拉幕";break;case 32:a.displayStyle="向下拉幕";break;case 33:a.displayStyle="左右闭合";break;case 34:a.displayStyle="左右对开";break;case 35:a.displayStyle="上下闭合";break;case 36:a.displayStyle="上下对开";break;case 37:a.displayStyle="向右移动";break;case 38:a.displayStyle="向右连移";break;case 39:a.displayStyle="向下移动";break;case 40:a.displayStyle="向下连移";break;case 41:a.displayStyle="45度左旋";break;case 42:a.displayStyle="180度左旋";break;case 43:a.displayStyle="90度左旋";break;case 44:a.displayStyle="45度右旋";break;case 45:a.displayStyle="180度右旋";break;case 46:a.displayStyle="90度右旋";break;case 47:a.displayStyle="菱形打开";break;case 48:a.displayStyle="菱形闭合"}s.confirmDialog(450,"节目管理",a,"tpl/led_program.html",function(e,a){})}else s.alert("暂无节目播放","info")})},e.sendCommand=function(a){var l=e.ids.join(","),t={sns:l,cmdCode:a,cmdParams:""};switch(a){case 1:case 2:case 3:case 4:s.confirm("终端操作","确定对当前选中的设备执行命令："+function(e){switch(e){case 1:return"开机";case 2:return"关机";case 3:return"校时";case 4:return"格式化"}}(a)+"?",function(e,a){a.isPosting=!0,s.postData(s.api.led+"sendCommand",t,function(){e.close(),s.alert("操作成功","success")})});break;case 5:s.confirmDialog(450,"亮度设置",t,"tpl/light_setting.html",function(e,a){a.isShowMessage=!1,a.modalForm.$valid?(a.isPosting=!0,s.postData(s.api.led+"sendCommand",t,function(){e.close(),s.alert("设置成功","success")})):a.isShowMessage=!0})}},e.del=function(a){s.confirm("删除","确定删除终端"+a.name+"?",function(l,t){t.isPosting=!0,s.postData(s.api.led+"deleteLed",{id:a.id},function(a){l.close(),s.alert("删除成功","success"),e.callServer(e.tableState)})})},e.checkAll=function(a){s.checkAll(a,e)},e.checkThis=function(a,l){s.checkThis(a,l,e)},e.showTip=function(e){$(e.currentTarget).children(".btn").hasClass("disabled")&&$(e.currentTarget).children(".tipDiv").show()},e.hideTip=function(e){$(e.currentTarget).children(".tipDiv").hide()}}]);