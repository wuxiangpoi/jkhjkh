"use strict";angular.module("sbAdminApp").controller("loginCtrl",["$scope","$rootScope","baseService","userService",function(o,e,r,i){if(o.domain="",o.account="",o.password="",o.isRemembered=!0,o.isShowMessage=!1,$.cookie("user_cookie")&&4!=$.cookie("user_cookie").length){var n=JSON.parse($.cookie("user_cookie"));o.domain=n.domain,o.account=n.account,o.password=n.password}o.login=function(){if(o.loginForm.$valid){var n={domain:o.domain,account:o.account,password:r.md5_pwd(o.password)};i.login(n,function(n){i.getUserSrc(function(i){e.userData=i,e.current_perms=i.current_perms,e.root_programReslotions=i.root_programReslotions,e.rootGroup=i.root_organizations[0];for(var n=0;n<i.root_organizations.length;n++)""==i.root_organizations[n].pid&&(e.rootGroup=i.root_organizations[n]);r.goToUrl("/dashboard/home"),o.isRemembered?$.cookie("user_cookie",JSON.stringify({domain:o.domain,account:o.account,password:o.password}),{expires:30}):$.cookie("user_cookie",null)})})}else o.isShowMessage=!0},o.myKeyup=function(e){13==(window.event?e.keyCode:e.which)&&o.login()}}]);