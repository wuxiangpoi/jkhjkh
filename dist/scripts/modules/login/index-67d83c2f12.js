"use strict";angular.module("sbAdminApp").controller("loginCtrl",["$scope","$rootScope","baseService","userService",function(o,e,r,s){if(o.account="",o.password="",o.isRemembered=!0,o.isShowMessage=!1,$.cookie("user_cookie")&&4!=$.cookie("user_cookie").length){var i=JSON.parse($.cookie("user_cookie"));o.account=i.account,o.password=i.password}o.login=function(){if(o.loginForm.$valid){var i={account:o.account,password:r.md5_pwd(o.password)};s.login(i,function(i){s.getUserSrc(function(s){e.userData=s,e.current_perms=s.current_perms,e.root_programReslotions=s.root_programReslotions,e.rootGroup=s.root_organizations[0];for(var i=0;i<s.root_organizations.length;i++)""==s.root_organizations[i].pid&&(e.rootGroup=s.root_organizations[i]);r.goToUrl("/dashboard/home"),o.isRemembered?$.cookie("user_cookie",JSON.stringify({account:o.account,password:o.password}),{expires:30}):$.cookie("user_cookie",null)})})}else o.isShowMessage=!0},o.myKeyup=function(e){13==(window.event?e.keyCode:e.which)&&o.login()}}]);