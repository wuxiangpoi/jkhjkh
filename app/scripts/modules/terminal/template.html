<div class="content-wrap" style="min-width:760px;">
	<div class="level2 clearfix">
		<div class="tipBtnWrap" ng-if="perms(217)" class="dropdown" ng-mouseenter="showTip($event)" ng-mouseleave=hideTip($event)>
			<div class="tipDiv">选中正常状态下的终端才能进行此操作</div>
			<button ng-class="{'disabled': idsNormal.length == 0}" type="button" data-toggle="dropdown" class="btn btn-primary">
				下发命令
				<i class="fa fa-caret-down"></i>
			</button>
			<ul class="dropdown-menu dropdown-user">
				<li>
					<a href="javascript:void(0)" ng-click="sendCommand(7)">
						<i class="fa fa-camera fa-fw"></i>
						终端截屏</a>
				</li>
			</ul>
		</div>
		<div ng-if="perms(218)" ng-mouseenter="showTip($event)" ng-mouseleave=hideTip($event) class="tipBtnWrap">
			<button ng-class="{'disabled': ids.length == 0}" type="button" ng-click="setGroup()" class="btn btn-primary">
				设置所属机构
			</button>
			<div class="tipDiv">请先选择终端</div>
		</div>
		<div ng-if="perms(212)" class="tipBtnWrap">
			<button ng-click="addGroup()" class="btn btn-primary">
				添加分组
			</button>
		</div>
		<div ng-if="perms(214)" ng-mouseenter="showTip($event)" ng-mouseleave=hideTip($event) class="tipBtnWrap">
			<button ng-class="{'disabled': ids.length == 0}" type="button" ng-click="setLeaf()" class="btn btn-primary">
				设置分组
			</button>
			<div class="tipDiv">请先选择终端</div>
		</div>
		<div ng-if="perms(214)" ng-mouseenter="showTip($event)" ng-mouseleave=hideTip($event) class="tipBtnWrap">
			<button ng-class="{'disabled': ids.length == 0}" type="button" ng-click="cancelLeaf()" class="btn btn-primary">
				设置分组
			</button>
			<div class="tipDiv">请先选择终端</div>
		</div>
		<div class="serchWrap fr">
			<div class="fl txtInputWrap">
				<input class="form-control" ng-model="sp.search" placeholder="终端名称/终端编号">
			</div>
			<button type="button" class="btn btn-primary" ng-click="callServer(tableState)">查询</button>
			<button type="button" class="btn btn-primary" ng-click="exportExcel()">导出</button>
		</div>
	</div>

	<div class="table-wrapper">
		<div class="tableHeader clearfix">

		</div>
		<table class="table" st-pipe="callServer" st-table="displayed">
			<thead>
				<tr>
					<th>
						<input ng-checked="ids.length == displayed.length && displayed.length != 0" ng-click="checkAll($event)" type="checkbox">
					</th>
					<th>终端编号</th>
					<th>终端名称</th>
					<th>网络状态</th>
					<th>屏幕分辨率</th>
					<th>所属城市</th>
					<th>节目数量</th>
					<th>操作</th>
				</tr>
			</thead>
			<tbody ng-show="!isLoading">
				<tr class="{{$index%2 == 0?'odd':'even'}}" ng-repeat="row in displayed">
					<td>
						<input ng-click="checkThis(row,$event)" ng-checked="ids.indexOf(row.id) != -1" type="checkbox">
					</td>
					<td class="tdClick" ng-click="details(row)">{{row.no}}</td>
					<td>{{row.name}}</td>
					<td>
						<div class="txt-red" ng-if="row.status == 0">未激活</div>
						<div class="txt-green" ng-if="row.status == 1">在线</div>
						<div class="txt-grey" ng-if="row.status == 2">离线</div>
						<div class="txt-red" ng-if="row.status == 3">异常</div>
					</td>
					<td>
						{{row.resolution}}
					</td>
					<td>
						{{getCityName(row.city_no)}}
					</td>
					<td>
						<div ng-if="row.programCounts == 0">
							0
						</div>
						<div class="tdClick" ng-if="row.programCounts > 0" ng-click="programPlayManage()">
							{{row.programCounts}}
						</div>
					</td>
					<td>
						<button ng-if="perms(213)" class="btn tableBtn" ng-click="save(row)">编辑
						</button>
					</td>
				</tr>
			</tbody>
			<tbody ng-include="'tpl/table.html'"></tbody>
			<tfoot ng-show="!isLoading" ng-include="'tpl/table_footer.html'"></tfoot>
		</table>
	</div>
</div>